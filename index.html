<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë‚˜ì˜ ê·€ì—¬ìš´ ì¼ê¸°ì¥ ğŸ¸ğŸ±</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
    <style>
        /* ì „ë°˜ì ì¸ ë¶„ìœ„ê¸°: ê·€ì—½ê³  ë”°ëœ»í•œ ëŠë‚Œ, íŒŒìŠ¤í…” í†¤ ìƒ‰ìƒ */
        body {
            font-family: 'Inter', sans-serif; /* ê¸°ë³¸ í°íŠ¸ ì„¤ì • */
            background-color: #f7f2e9; /* ì—°í•œ ë² ì´ì§€ìƒ‰ ë°°ê²½ */
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: flex-start; /* ìƒë‹¨ ì •ë ¬ */
            min-height: 100vh;
            box-sizing: border-box;
            color: #5a4a42; /* ë¶€ë“œëŸ¬ìš´ ê°ˆìƒ‰ í…ìŠ¤íŠ¸ */
        }

        .container {
            background-color: #ffffff; /* í°ìƒ‰ ì»¨í…Œì´ë„ˆ ë°°ê²½ */
            border-radius: 25px; /* ë‘¥ê·¼ ëª¨ì„œë¦¬ */
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1); /* ë¶€ë“œëŸ¬ìš´ ê·¸ë¦¼ì */
            padding: 30px;
            max-width: 700px; /* ìµœëŒ€ ë„ˆë¹„ ì„¤ì • */
            width: 100%; /* ëª¨ë°”ì¼ì—ì„œ ì „ì²´ ë„ˆë¹„ ì‚¬ìš© */
            box-sizing: border-box;
            display: flex;
            flex-direction: column;
            gap: 20px; /* ì„¹ì…˜ ê°„ ê°„ê²© */
            margin-top: 20px; /* ìƒë‹¨ ì—¬ë°± */
        }

        /* í—¤ë” ìŠ¤íƒ€ì¼ë§ */
        .header {
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin-bottom: 20px;
        }

        .header h1 {
            color: #ff9a8d; /* ë”°ëœ»í•œ ì£¼í™©ìƒ‰ ì œëª© */
            font-size: 2.5em;
            margin: 0;
            font-weight: 600;
        }

        /* ê° ì„¹ì…˜ ê³µí†µ ìŠ¤íƒ€ì¼ */
        .section {
            background-color: #fcf8f3; /* ì—°í•œ ë°°ê²½ìƒ‰ */
            border-radius: 15px;
            padding: 20px;
            box-shadow: inset 0 2px 5px rgba(0, 0, 0, 0.05); /* ì€ì€í•œ ë‚´ë¶€ ê·¸ë¦¼ì */
        }

        .section h2 {
            color: #a8d5ba; /* ë¯¼íŠ¸ìƒ‰ ì œëª© */
            margin-top: 0;
            font-size: 1.5em;
            border-bottom: 2px solid #e0f2e8;
            padding-bottom: 10px;
            margin-bottom: 15px;
        }

        /* ë‚ ì§œ ì„ íƒ ë° í‘œì‹œ */
        .date-selection input[type="date"] {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0f2e8; /* ì—°í•œ ë¯¼íŠ¸ìƒ‰ í…Œë‘ë¦¬ */
            border-radius: 10px;
            font-size: 1em;
            color: #5a4a42;
            box-sizing: border-box;
            background-color: #ffffff;
        }

        /* ì¼ê¸° ì‘ì„± ì˜ì—­ */
        .diary-entry textarea {
            width: 100%;
            min-height: 200px;
            padding: 15px;
            border: 2px solid #e0f2e8;
            border-radius: 10px;
            font-size: 1.1em;
            line-height: 1.6;
            color: #5a4a42;
            resize: vertical; /* ì„¸ë¡œ í¬ê¸° ì¡°ì ˆ ê°€ëŠ¥ */
            box-sizing: border-box;
            background-color: #ffffff;
        }

        /* ê°ì •/íƒœê·¸ ì„ íƒ */
        .emotion-tags .options {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }

        .emotion-tags .option {
            padding: 10px 15px;
            border-radius: 20px;
            background-color: #ffe0b2; /* ì—°í•œ ì£¼í™©ìƒ‰ ë°°ê²½ */
            color: #a0522d; /* ì§„í•œ ì£¼í™©ìƒ‰ í…ìŠ¤íŠ¸ */
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.2s ease;
            font-weight: 600;
            white-space: nowrap; /* í…ìŠ¤íŠ¸ê°€ ì¤„ë°”ê¿ˆë˜ì§€ ì•Šë„ë¡ */
        }

        .emotion-tags .option:hover {
            background-color: #ffd180;
            transform: translateY(-2px);
        }

        .emotion-tags .option.selected {
            background-color: #ff9a8d; /* ì„ íƒ ì‹œ ë” ì§„í•œ ìƒ‰ */
            color: #ffffff;
            box-shadow: 0 3px 8px rgba(0, 0, 0, 0.15);
        }

        /* ì‚¬ì§„ ì²¨ë¶€ */
        .photo-attachment input[type="file"] {
            display: none; /* ê¸°ë³¸ íŒŒì¼ ì…ë ¥ ìˆ¨ê¸°ê¸° */
        }

        .photo-attachment .custom-file-upload {
            display: inline-block;
            padding: 10px 20px;
            background-color: #a8d5ba; /* ë¯¼íŠ¸ìƒ‰ ë²„íŠ¼ */
            color: white;
            border-radius: 10px;
            cursor: pointer;
            transition: background-color 0.3s ease;
            font-weight: 600;
            margin-bottom: 15px; /* íŒŒì¼ ì—…ë¡œë“œ ë²„íŠ¼ ì•„ë˜ ì—¬ë°± */
        }

        .photo-attachment .custom-file-upload:hover {
            background-color: #8ecaa1;
        }

        /* ì—¬ëŸ¬ ì´ë¯¸ì§€ ë¯¸ë¦¬ë³´ê¸° ì»¨í…Œì´ë„ˆ */
        #imagePreviewsContainer {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 15px;
        }

        /* ì´ë¯¸ì§€ ë¯¸ë¦¬ë³´ê¸° ê°œë³„ ì•„ì´í…œ */
        .image-preview-item {
            position: relative;
            max-width: 100px;
            max-height: 100px;
            border-radius: 10px;
            border: 2px dashed #e0f2e8;
            padding: 5px;
            cursor: pointer;
            transition: transform 0.2s ease;
        }

        .image-preview-item:hover {
            transform: scale(1.05);
        }

        .image-preview-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 8px; /* ë¶€ëª¨ì˜ ë‘¥ê·¼ ëª¨ì„œë¦¬ì— ë§ì¶¤ */
        }

        /* ì´ë¯¸ì§€ ì‚­ì œ ë²„íŠ¼ */
        .image-delete-button {
            position: absolute;
            top: -8px;
            right: -8px;
            background-color: #ff7f7f;
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 0.8em;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            transition: background-color 0.2s ease;
        }

        .image-delete-button:hover {
            background-color: #ff6363;
        }


        /* ë²„íŠ¼ ê·¸ë£¹ */
        .button-group {
            display: flex;
            flex-wrap: wrap; /* ëª¨ë°”ì¼ì—ì„œ ì¤„ë°”ê¿ˆ */
            gap: 15px;
            justify-content: center;
        }

        .button-group button {
            padding: 12px 25px;
            border: none;
            border-radius: 15px;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.2s ease, box-shadow 0.3s ease;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            color: white;
        }

        .button-group button:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
        }

        .button-group #saveButton {
            background-color: #ffbe76; /* ì—°í•œ ì£¼í™©ìƒ‰ */
        }
        .button-group #saveButton:hover {
            background-color: #ffa54f;
        }

        .button-group #editButton {
            background-color: #a8d5ba; /* ë¯¼íŠ¸ìƒ‰ */
        }
        .button-group #editButton:hover {
            background-color: #8ecaa1;
        }

        .button-group #deleteButton {
            background-color: #ff7f7f; /* ì—°í•œ ë¹¨ê°•ìƒ‰ */
        }
        .button-group #deleteButton:hover {
            background-color: #ff6363;
        }

        /* ì¼ê¸° ëª©ë¡/ë‹¬ë ¥ (ê°„ë‹¨í•œ ëª©ë¡ í˜•íƒœë¡œ êµ¬í˜„) */
        .diary-list ul {
            list-style: none;
            padding: 0;
        }

        .diary-list li {
            background-color: #fffacd; /* ì—°í•œ ë…¸ë‘ìƒ‰ */
            margin-bottom: 10px;
            padding: 12px 15px;
            border-radius: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        .diary-list li:hover {
            background-color: #fff8dc;
        }

        .diary-list li span {
            font-weight: 600;
            color: #a0522d;
        }

        .diary-list li button {
            background-color: #ff9a8d;
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.9em;
            transition: background-color 0.3s ease;
        }

        .diary-list li button:hover {
            background-color: #ff7f7f;
        }

        /* ê²€ìƒ‰ ê¸°ëŠ¥ */
        .search-diary {
            display: flex;
            gap: 10px;
        }

        .search-diary input[type="text"] {
            flex-grow: 1;
            padding: 12px;
            border: 2px solid #e0f2e8;
            border-radius: 10px;
            font-size: 1em;
            color: #5a4a42;
            box-sizing: border-box;
            background-color: #ffffff;
        }

        .search-diary button {
            padding: 12px 20px;
            background-color: #ffbe76;
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            transition: background-color 0.3s ease;
        }

        .search-diary button:hover {
            background-color: #ffa54f;
        }

        #searchResults {
            margin-top: 15px;
            padding-top: 10px;
            border-top: 1px dashed #e0f2e8;
        }

        #searchResults div {
            background-color: #fcf8f3;
            padding: 10px;
            border-radius: 8px;
            margin-bottom: 8px;
            font-size: 0.95em;
            color: #5a4a42;
        }

        /* ë°±ì—… ê¸°ëŠ¥ */
        .backup-diary .date-range {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
            flex-wrap: wrap; /* ëª¨ë°”ì¼ì—ì„œ ì¤„ë°”ê¿ˆ */
        }

        .backup-diary .date-range input[type="date"] {
            flex: 1;
            min-width: 120px; /* ìµœì†Œ ë„ˆë¹„ ì„¤ì • */
            padding: 12px;
            border: 2px solid #e0f2e8;
            border-radius: 10px;
            font-size: 1em;
            color: #5a4a42;
            box-sizing: border-box;
            background-color: #ffffff;
        }

        .backup-diary button {
            width: 100%;
            padding: 12px 20px;
            background-color: #76baff; /* íŒŒë€ìƒ‰ ë°±ì—… ë²„íŠ¼ */
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            transition: background-color 0.3s ease;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .backup-diary button:hover {
            background-color: #5a9ce0;
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
        }

        /* ì´ë¯¸ì§€ í™•ëŒ€ ëª¨ë‹¬ */
        .image-modal {
            display: none; /* ê¸°ë³¸ì ìœ¼ë¡œ ìˆ¨ê¹€ */
            position: fixed;
            z-index: 1002; /* ë‹¤ë¥¸ ìš”ì†Œ ìœ„ì— í‘œì‹œ */
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.8); /* ë°˜íˆ¬ëª… ê²€ì • ë°°ê²½ */
            justify-content: center;
            align-items: center;
            flex-direction: column;
        }

        .image-modal-content {
            margin: auto;
            display: block;
            max-width: 90%;
            max-height: 90%;
            object-fit: contain; /* ì´ë¯¸ì§€ ë¹„ìœ¨ ìœ ì§€ */
            border-radius: 15px;
            box-shadow: 0 0 20px rgba(0,0,0,0.5);
        }

        .image-modal-close {
            position: absolute;
            top: 20px;
            right: 35px;
            color: #f1f1f1;
            font-size: 40px;
            font-weight: bold;
            transition: 0.3s;
            cursor: pointer;
        }

        .image-modal-close:hover,
        .image-modal-close:focus {
            color: #bbb;
            text-decoration: none;
            cursor: pointer;
        }


        /* ëª¨ë°”ì¼ ë°˜ì‘í˜• ë””ìì¸ */
        @media (max-width: 600px) {
            body {
                padding: 10px;
            }

            .container {
                padding: 20px;
                margin-top: 10px;
            }

            .header h1 {
                font-size: 2em;
            }

            .button-group button {
                width: 100%; /* ë²„íŠ¼ ë„ˆë¹„ 100% */
                padding: 15px;
            }

            /* "ì˜¤ëŠ˜ì˜ ê¸°ë¶„ & íƒœê·¸" ë²„íŠ¼ í¬ê¸° ê°œì„  */
            .emotion-tags .options {
                flex-direction: row; /* ì„¸ë¡œ ì •ë ¬ ëŒ€ì‹  ê°€ë¡œ ì •ë ¬ ìœ ì§€ */
                flex-wrap: wrap; /* ë‚´ìš©ì— ë”°ë¼ ì¤„ë°”ê¿ˆ */
                justify-content: center; /* ì¤‘ì•™ ì •ë ¬ */
                align-items: center;
            }

            .emotion-tags .option {
                flex-shrink: 0; /* ì¤„ì–´ë“¤ì§€ ì•Šë„ë¡ ë°©ì§€ */
            }

            .search-diary {
                flex-direction: column;
            }

            .search-diary button {
                width: 100%;
            }

            .backup-diary .date-range {
                flex-direction: column; /* ë°±ì—… ë‚ ì§œ ì„ íƒ ì„¸ë¡œ ì •ë ¬ */
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>ğŸ¸ ë‚˜ì˜ ì†Œì¤‘í•œ ì¼ê¸° ğŸ±</h1>
        </header>

        <section class="section date-selection">
            <h2>ì˜¤ëŠ˜ì˜ ë‚ ì§œ</h2>
            <input type="date" id="diaryDate">
        </section>

        <section class="section emotion-tags">
            <h2>ì˜¤ëŠ˜ì˜ ê¸°ë¶„ & íƒœê·¸</h2>
            <div class="options">
                <span class="option" data-value="happy">ğŸ˜Š í–‰ë³µ</span>
                <span class="option" data-value="sad">ğŸ˜¢ ìŠ¬í””</span>
                <span class="option" data-value="angry">ğŸ˜¡ í™”ë‚¨</span>
                <span class="option" data-value="excited">ğŸ¤© ì‹ ë‚¨</span>
                <span class="option" data-value="tired">ğŸ˜´ í”¼ê³¤</span>
                <span class="option" data-value="love">ğŸ’– ì‚¬ë‘</span>
                <span class="option" data-value="daily">#ì¼ìƒ</span>
                <span class="option" data-value="study">#ê³µë¶€</span>
                <span class="option" data-value="travel">#ì—¬í–‰</span>
                <span class="option" data-value="food">#ìŒì‹</span>
            </div>
            <input type="hidden" id="selectedEmotion">
            <input type="hidden" id="selectedTags">
        </section>

        <section class="section diary-entry">
            <h2>ì˜¤ëŠ˜ì˜ ì´ì•¼ê¸°</h2>
            <textarea id="diaryContent" placeholder="ì˜¤ëŠ˜ í•˜ë£¨ëŠ” ì–´ë• ë‚˜ìš”? ììœ ë¡­ê²Œ ê¸°ë¡í•´ë³´ì„¸ìš”..."></textarea>
        </section>

        <section class="section photo-attachment">
            <h2>ì‚¬ì§„ ì²¨ë¶€</h2>
            <label for="photoUpload" class="custom-file-upload">ì‚¬ì§„ ì„ íƒ</label>
            <input type="file" id="photoUpload" accept="image/*" multiple>
            <div id="imagePreviewsContainer">
                </div>
        </section>

        <div class="button-group">
            <button id="saveButton">ì €ì¥ ğŸ’¾</button>
            <button id="editButton">ìˆ˜ì • âœï¸</button>
            <button id="deleteButton">ì‚­ì œ ğŸ—‘ï¸</button>
        </div>

        <section class="section diary-list">
            <h2>ë‚´ ì¼ê¸° ëª©ë¡</h2>
            <ul id="diaryList">
                <li>ì•„ì§ ì‘ì„±ëœ ì¼ê¸°ê°€ ì—†ì–´ìš”.</li>
            </ul>
        </section>

        <section class="section search-diary">
            <h2>ì¼ê¸° ê²€ìƒ‰</h2>
            <input type="text" id="searchQuery" placeholder="ê²€ìƒ‰í•  ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”...">
            <button id="searchButton">ê²€ìƒ‰ ğŸ”</button>
            <div id="searchResults">
                </div>
        </section>

        <section class="section backup-diary">
            <h2>ì¼ê¸° ë°±ì—…</h2>
            <div class="date-range">
                <input type="date" id="backupStartDate">
                <span>~</span>
                <input type="date" id="backupEndDate">
            </div>
            <button id="backupButton">ë°±ì—… ğŸ“¥</button>
        </section>
    </div>

    <div id="imageModal" class="image-modal">
        <span class="image-modal-close">&times;</span>
        <img class="image-modal-content" id="modalImage">
    </div>

    <script>
        // DOM ìš”ì†Œ ê°€ì ¸ì˜¤ê¸°
        const diaryDateInput = document.getElementById('diaryDate');
        const diaryContentTextarea = document.getElementById('diaryContent');
        const saveButton = document.getElementById('saveButton');
        const editButton = document.getElementById('editButton');
        const deleteButton = document.getElementById('deleteButton');
        const photoUploadInput = document.getElementById('photoUpload');
        const imagePreviewsContainer = document.getElementById('imagePreviewsContainer'); // ì—¬ëŸ¬ ì´ë¯¸ì§€ ë¯¸ë¦¬ë³´ê¸° ì»¨í…Œì´ë„ˆ
        const emotionOptions = document.querySelectorAll('.emotion-tags .option');
        const selectedEmotionInput = document.getElementById('selectedEmotion');
        const selectedTagsInput = document.getElementById('selectedTags');
        const diaryListUl = document.getElementById('diaryList');
        const searchQueryInput = document.getElementById('searchQuery');
        const searchButton = document.getElementById('searchButton');
        const searchResultsDiv = document.getElementById('searchResults');

        // ë°±ì—… ê´€ë ¨ DOM ìš”ì†Œ
        const backupStartDateInput = document.getElementById('backupStartDate');
        const backupEndDateInput = document.getElementById('backupEndDate');
        const backupButton = document.getElementById('backupButton');

        // ì´ë¯¸ì§€ ëª¨ë‹¬ ê´€ë ¨ DOM ìš”ì†Œ
        const imageModal = document.getElementById('imageModal');
        const modalImage = document.getElementById('modalImage');
        const imageModalClose = document.getElementsByClassName('image-modal-close')[0];


        // ì´ˆê¸°í™”: ì˜¤ëŠ˜ ë‚ ì§œ ì„¤ì • ë° í•´ë‹¹ ë‚ ì§œ ì¼ê¸° ë¶ˆëŸ¬ì˜¤ê¸°
        window.onload = () => {
            const today = new Date();
            const year = today.getFullYear();
            const month = String(today.getMonth() + 1).padStart(2, '0');
            const day = String(today.getDate()).padStart(2, '0');
            const todayString = `${year}-${month}-${day}`;
            diaryDateInput.value = todayString;
            backupStartDateInput.value = todayString; // ë°±ì—… ì‹œì‘ ë‚ ì§œë„ ì˜¤ëŠ˜ë¡œ ì´ˆê¸°í™”
            backupEndDateInput.value = todayString;   // ë°±ì—… ì¢…ë£Œ ë‚ ì§œë„ ì˜¤ëŠ˜ë¡œ ì´ˆê¸°í™”
            loadDiary(todayString);
            renderDiaryList();
        };

        // ë‚ ì§œ ë³€ê²½ ì‹œ í•´ë‹¹ ë‚ ì§œì˜ ì¼ê¸° ë¶ˆëŸ¬ì˜¤ê¸°
        diaryDateInput.addEventListener('change', (event) => {
            const selectedDate = event.target.value;
            loadDiary(selectedDate);
        });

        // ê°ì •/íƒœê·¸ ì„ íƒ í•¸ë“¤ëŸ¬
        emotionOptions.forEach(option => {
            option.addEventListener('click', () => {
                const value = option.dataset.value;
                // ê°ì •ì€ ë‹¨ì¼ ì„ íƒ, íƒœê·¸ëŠ” ë‹¤ì¤‘ ì„ íƒ
                const isEmotion = ['happy', 'sad', 'angry', 'excited', 'tired', 'love'].includes(value);

                if (isEmotion) {
                    // ê°ì •ì€ ë‹¨ì¼ ì„ íƒ
                    emotionOptions.forEach(opt => {
                        const optValue = opt.dataset.value;
                        const optIsEmotion = ['happy', 'sad', 'angry', 'excited', 'tired', 'love'].includes(optValue);
                        if (optIsEmotion) {
                            opt.classList.remove('selected');
                        }
                    });
                    option.classList.add('selected');
                    selectedEmotionInput.value = value;
                } else {
                    // íƒœê·¸ëŠ” ë‹¤ì¤‘ ì„ íƒ ê°€ëŠ¥
                    option.classList.toggle('selected');
                    const selectedTags = Array.from(document.querySelectorAll('.emotion-tags .option.selected'))
                                            .filter(opt => !['happy', 'sad', 'angry', 'excited', 'tired', 'love'].includes(opt.dataset.value))
                                            .map(opt => opt.dataset.value);
                    selectedTagsInput.value = JSON.stringify(selectedTags);
                }
            });
        });

        // ì‚¬ì§„ ì²¨ë¶€ ë¯¸ë¦¬ë³´ê¸° ê¸°ëŠ¥ (ì—¬ëŸ¬ ì¥)
        photoUploadInput.addEventListener('change', (event) => {
            // ê¸°ì¡´ ë¯¸ë¦¬ë³´ê¸°ëŠ” ìœ ì§€í•˜ê³  ìƒˆ íŒŒì¼ë§Œ ì¶”ê°€
            const files = event.target.files;
            if (files.length > 0) {
                Array.from(files).forEach(file => {
                    const reader = new FileReader();
                    reader.onload = (e) => {
                        createImagePreview(e.target.result);
                    };
                    reader.readAsDataURL(file);
                });
            }
            photoUploadInput.value = ''; // ê°™ì€ íŒŒì¼ ë‹¤ì‹œ ì„ íƒí•  ìˆ˜ ìˆë„ë¡ ì…ë ¥ ì´ˆê¸°í™”
        });

        // ì´ë¯¸ì§€ ë¯¸ë¦¬ë³´ê¸° ìƒì„± ë° ì‚­ì œ/ëª¨ë‹¬ ê¸°ëŠ¥ ì¶”ê°€ í•¨ìˆ˜
        function createImagePreview(imgSrc) {
            const imagePreviewItem = document.createElement('div');
            imagePreviewItem.classList.add('image-preview-item');

            const img = document.createElement('img');
            img.src = imgSrc;
            img.alt = 'ì„ íƒëœ ì´ë¯¸ì§€ ë¯¸ë¦¬ë³´ê¸°';
            imagePreviewItem.appendChild(img);

            const deleteButton = document.createElement('span');
            deleteButton.classList.add('image-delete-button');
            deleteButton.textContent = 'x';
            deleteButton.title = 'ì‚¬ì§„ ì‚­ì œ';
            deleteButton.addEventListener('click', (e) => {
                e.stopPropagation(); // ì´ë¯¸ì§€ í´ë¦­ ì´ë²¤íŠ¸ ë°©ì§€
                imagePreviewItem.remove(); // ë¯¸ë¦¬ë³´ê¸° ì•„ì´í…œ ì‚­ì œ
            });
            imagePreviewItem.appendChild(deleteButton);

            // ì´ë¯¸ì§€ í´ë¦­ ì‹œ ëª¨ë‹¬ ì—´ê¸° ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€
            img.addEventListener('click', () => {
                modalImage.src = img.src;
                imageModal.style.display = 'flex'; // flexë¡œ ì„¤ì •í•˜ì—¬ ì¤‘ì•™ ì •ë ¬
            });

            imagePreviewsContainer.appendChild(imagePreviewItem);
        }


        // ì´ë¯¸ì§€ ëª¨ë‹¬ ë‹«ê¸° ì´ë²¤íŠ¸
        imageModalClose.addEventListener('click', () => {
            imageModal.style.display = 'none';
        });

        // ëª¨ë‹¬ ì™¸ë¶€ í´ë¦­ ì‹œ ë‹«ê¸° (ì˜µì…˜)
        imageModal.addEventListener('click', (event) => {
            if (event.target === imageModal) {
                imageModal.style.display = 'none';
            }
        });


        // ì €ì¥ ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸
        saveButton.addEventListener('click', () => {
            const date = diaryDateInput.value;
            const content = diaryContentTextarea.value;
            const emotion = selectedEmotionInput.value;
            const tags = JSON.parse(selectedTagsInput.value || '[]');
            
            // í˜„ì¬ í‘œì‹œëœ ì—¬ëŸ¬ ì´ë¯¸ì§€ ë°ì´í„° ìˆ˜ì§‘
            const imageDataArray = [];
            Array.from(imagePreviewsContainer.querySelectorAll('.image-preview-item img')).forEach(img => {
                if (img.src && img.src !== '#') {
                    imageDataArray.push(img.src);
                }
            });

            if (!date || !content) {
                alertMessage('ë‚ ì§œì™€ ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”!', 'warning');
                return;
            }

            const diaryEntry = {
                content: content,
                emotion: emotion,
                tags: tags,
                imageData: imageDataArray, // ì´ë¯¸ì§€ ë°ì´í„°ë¥¼ ë°°ì—´ë¡œ ì €ì¥
                timestamp: new Date().toISOString() // ì €ì¥ ì‹œ íƒ€ì„ìŠ¤íƒ¬í”„
            };

            // ë¡œì»¬ ì €ì¥ ë¡œì§
            saveDiaryLocally(date, diaryEntry);
            alertMessage('ì¼ê¸°ê°€ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!', 'success');
            renderDiaryList(); // ëª©ë¡ ì—…ë°ì´íŠ¸
            clearDiaryForm(); // ì €ì¥ í›„ í¼ ì´ˆê¸°í™”
            // ì„œë²„ ì €ì¥ (ê°œë…ì )
            // saveDiaryToServer(date, diaryEntry);
        });

        // ìˆ˜ì • ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸ (í˜„ì¬ ë‚ ì§œì˜ ì¼ê¸° ë¶ˆëŸ¬ì˜¤ê¸°)
        editButton.addEventListener('click', () => {
            const date = diaryDateInput.value;
            loadDiary(date);
            alertMessage('í˜„ì¬ ë‚ ì§œì˜ ì¼ê¸°ë¥¼ ë¶ˆëŸ¬ì™”ìŠµë‹ˆë‹¤. ìˆ˜ì • í›„ ë‹¤ì‹œ ì €ì¥í•´ì£¼ì„¸ìš”.', 'info');
        });

        // ì‚­ì œ ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸
        deleteButton.addEventListener('click', async () => { // async ì¶”ê°€
            const date = diaryDateInput.value;
            const confirmed = await confirmMessage('ì •ë§ë¡œ ì´ ë‚ ì§œì˜ ì¼ê¸°ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?'); // await ì¶”ê°€
            if (confirmed) {
                // ë¡œì»¬ ì‚­ì œ ë¡œì§
                deleteDiaryLocally(date);
                alertMessage('ì¼ê¸°ê°€ ì„±ê³µì ìœ¼ë¡œ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤!', 'success');
                clearDiaryForm();
                renderDiaryList(); // ëª©ë¡ ì—…ë°ì´íŠ¸
                // ì„œë²„ ì‚­ì œ (ê°œë…ì )
                // deleteDiaryFromServer(date);
            }
        });

        // ê²€ìƒ‰ ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸
        searchButton.addEventListener('click', () => {
            const query = searchQueryInput.value.toLowerCase();
            searchDiaries(query);
        });

        // ë°±ì—… ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸
        backupButton.addEventListener('click', async () => {
            const startDateStr = backupStartDateInput.value;
            const endDateStr = backupEndDateInput.value;

            if (!startDateStr || !endDateStr) {
                alertMessage('ë°±ì—… ê¸°ê°„ì„ ì„ íƒí•´ì£¼ì„¸ìš”!', 'warning');
                return;
            }

            const startDate = new Date(startDateStr);
            const endDate = new Date(endDateStr);

            // ì¢…ë£Œ ë‚ ì§œì˜ ì‹œê°„ì„ 23:59:59ë¡œ ì„¤ì •í•˜ì—¬ í•´ë‹¹ ë‚ ì§œì˜ ëª¨ë“  ì¼ê¸°ë¥¼ í¬í•¨í•˜ë„ë¡ í•¨
            endDate.setHours(23, 59, 59, 999); 

            if (startDate > endDate) {
                alertMessage('ì‹œì‘ ë‚ ì§œëŠ” ì¢…ë£Œ ë‚ ì§œë³´ë‹¤ ë¹ ë¥´ê±°ë‚˜ ê°™ì•„ì•¼ í•©ë‹ˆë‹¤!', 'warning');
                return;
            }

            let backupContent = `=== ì¼ê¸° ë°±ì—… (${startDateStr} ~ ${endDateStr}) ===\n\n`;
            let hasEntries = false;

            // localStorageì˜ ëª¨ë“  í‚¤ë¥¼ ìˆœíšŒí•˜ë©° ì¼ê¸° ë°ì´í„° ì¶”ì¶œ
            const diaryKeys = [];
            for (let i = 0; i < localStorage.length; i++) {
                const key = localStorage.key(i);
                if (key.startsWith('diary_')) {
                    diaryKeys.push(key);
                }
            }

            // ë‚ ì§œ ìˆœìœ¼ë¡œ ì •ë ¬
            diaryKeys.sort((a, b) => {
                const dateA = new Date(a.replace('diary_', ''));
                const dateB = new Date(b.replace('diary_', ''));
                return dateA - dateB;
            });

            diaryKeys.forEach(key => {
                const dateStr = key.replace('diary_', '');
                const entryDate = new Date(dateStr);

                // ì„ íƒëœ ê¸°ê°„ ë‚´ì˜ ì¼ê¸°ë§Œ í¬í•¨
                if (entryDate >= startDate && entryDate <= endDate) {
                    const entry = loadDiaryLocally(dateStr);
                    if (entry) {
                        hasEntries = true;
                        backupContent += `--- ë‚ ì§œ: ${dateStr} ---\n`;
                        backupContent += `ê¸°ë¶„: ${entry.emotion || 'ì—†ìŒ'}\n`;
                        backupContent += `íƒœê·¸: ${entry.tags && entry.tags.length > 0 ? entry.tags.join(', ') : 'ì—†ìŒ'}\n`;
                        backupContent += `ë‚´ìš©:\n${entry.content}\n`;
                        if (entry.imageData && entry.imageData.length > 0) {
                            backupContent += `(ì‚¬ì§„ ${entry.imageData.length}ì¥ ì²¨ë¶€ë¨ - í…ìŠ¤íŠ¸ íŒŒì¼ì—ëŠ” ì´ë¯¸ì§€ í¬í•¨ ì•ˆë¨)\n`;
                        }
                        backupContent += `ì €ì¥ ì‹œê°: ${new Date(entry.timestamp).toLocaleString()}\n\n`;
                    }
                }
            });

            if (!hasEntries) {
                alertMessage('ì„ íƒëœ ê¸°ê°„ì— ì‘ì„±ëœ ì¼ê¸°ê°€ ì—†ìŠµë‹ˆë‹¤.', 'info');
                return;
            }

            // í…ìŠ¤íŠ¸ íŒŒì¼ë¡œ ì €ì¥
            const blob = new Blob([backupContent], { type: 'text/plain;charset=utf-8' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `diary_backup_${startDateStr}_${endDateStr}.txt`;
            document.body.appendChild(a);
            a.click(); // ë‹¤ìš´ë¡œë“œ íŠ¸ë¦¬ê±°
            document.body.removeChild(a);
            URL.revokeObjectURL(url); // URL í•´ì œ

            alertMessage('ì¼ê¸° ë°±ì—…ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!', 'success');
        });


        /* --- ì¼ê¸° ì €ì¥/ë¶ˆëŸ¬ì˜¤ê¸°/ì‚­ì œ ë¡œì§ (ë¡œì»¬ ì €ì¥ì†Œ) --- */

        // ë¡œì»¬ ì €ì¥: ë¸Œë¼ìš°ì €ì˜ localStorageë¥¼ í™œìš©
        function saveDiaryLocally(date, entry) {
            localStorage.setItem(`diary_${date}`, JSON.stringify(entry));
        }

        // ë¡œì»¬ ë¶ˆëŸ¬ì˜¤ê¸°: localStorageì—ì„œ ì¼ê¸° ë‚´ìš© ë¶ˆëŸ¬ì˜¤ê¸°
        function loadDiaryLocally(date) {
            const storedEntry = localStorage.getItem(`diary_${date}`);
            return storedEntry ? JSON.parse(storedEntry) : null;
        }

        // ë¡œì»¬ ì‚­ì œ: localStorageì—ì„œ ì¼ê¸° ë‚´ìš© ì‚­ì œ
        function deleteDiaryLocally(date) {
            localStorage.removeItem(`diary_${date}`);
        }

        // íŠ¹ì • ë‚ ì§œì˜ ì¼ê¸° ë¶ˆëŸ¬ì™€ UIì— í‘œì‹œ
        function loadDiary(date) {
            const entry = loadDiaryLocally(date);
            if (entry) {
                diaryContentTextarea.value = entry.content;
                // ê°ì • ë° íƒœê·¸ UI ì—…ë°ì´íŠ¸
                emotionOptions.forEach(option => option.classList.remove('selected'));
                if (entry.emotion) {
                    const emotionOpt = document.querySelector(`.emotion-tags .option[data-value="${entry.emotion}"]`);
                    if (emotionOpt) emotionOpt.classList.add('selected');
                    selectedEmotionInput.value = entry.emotion;
                } else {
                    selectedEmotionInput.value = '';
                }
                if (entry.tags && Array.isArray(entry.tags)) {
                    entry.tags.forEach(tag => {
                        const tagOpt = document.querySelector(`.emotion-tags .option[data-value="${tag}"]`);
                        if (tagOpt) tagOpt.classList.add('selected');
                    });
                    selectedTagsInput.value = JSON.stringify(entry.tags);
                } else {
                    selectedTagsInput.value = '[]';
                }

                // ì—¬ëŸ¬ ì´ë¯¸ì§€ ë¯¸ë¦¬ë³´ê¸° ì—…ë°ì´íŠ¸
                imagePreviewsContainer.innerHTML = ''; // ê¸°ì¡´ ë¯¸ë¦¬ë³´ê¸° ì´ˆê¸°í™”
                if (entry.imageData && Array.isArray(entry.imageData) && entry.imageData.length > 0) {
                    entry.imageData.forEach(imgSrc => {
                        createImagePreview(imgSrc); // ì´ë¯¸ì§€ ë¯¸ë¦¬ë³´ê¸° ìƒì„± í•¨ìˆ˜ í˜¸ì¶œ
                    });
                }
            } else {
                clearDiaryForm();
            }
        }

        // ì¼ê¸° ì‘ì„± í¼ ì´ˆê¸°í™”
        function clearDiaryForm() {
            diaryContentTextarea.value = '';
            emotionOptions.forEach(option => option.classList.remove('selected'));
            selectedEmotionInput.value = '';
            selectedTagsInput.value = '[]';
            imagePreviewsContainer.innerHTML = ''; // ì—¬ëŸ¬ ì´ë¯¸ì§€ ë¯¸ë¦¬ë³´ê¸° ì»¨í…Œì´ë„ˆ ì´ˆê¸°í™”
            photoUploadInput.value = ''; // íŒŒì¼ ì…ë ¥ ì´ˆê¸°í™”
            // ë‚ ì§œëŠ” ì˜¤ëŠ˜ ë‚ ì§œë¡œ ìœ ì§€ (ì‚¬ìš©ìê°€ ë‹¤ë¥¸ ë‚ ì§œë¥¼ ì„ íƒí•˜ì§€ ì•ŠëŠ” í•œ)
            // const today = new Date();
            // const year = today.getFullYear();
            // const month = String(today.getMonth() + 1).padStart(2, '0');
            // const day = String(today.getDate()).padStart(2, '0');
            // const todayString = `${year}-${month}-${day}`;
            // diaryDateInput.value = todayString;
        }

        // ì¼ê¸° ëª©ë¡ ë Œë”ë§
        function renderDiaryList() {
            diaryListUl.innerHTML = ''; // ê¸°ì¡´ ëª©ë¡ ì´ˆê¸°í™”
            const diaryDates = [];
            for (let i = 0; i < localStorage.length; i++) {
                const key = localStorage.key(i);
                if (key.startsWith('diary_')) {
                    diaryDates.push(key.replace('diary_', ''));
                }
            }
            diaryDates.sort((a, b) => new Date(b) - new Date(a)); // ìµœì‹  ë‚ ì§œë¶€í„° ì •ë ¬

            if (diaryDates.length === 0) {
                const li = document.createElement('li');
                li.textContent = 'ì•„ì§ ì‘ì„±ëœ ì¼ê¸°ê°€ ì—†ì–´ìš”.';
                diaryListUl.appendChild(li);
                return;
            }

            diaryDates.forEach(date => {
                const li = document.createElement('li');
                li.innerHTML = `<span>${date}</span>
                                <button data-date="${date}">ì—´ê¸°</button>`;
                li.querySelector('button').addEventListener('click', (event) => {
                    const targetDate = event.target.dataset.date;
                    diaryDateInput.value = targetDate; // ë‚ ì§œ ì…ë ¥ë€ ì—…ë°ì´íŠ¸
                    loadDiary(targetDate);
                });
                diaryListUl.appendChild(li);
            });
        }

        // í…ìŠ¤íŠ¸ ê¸°ë°˜ ê²€ìƒ‰ ê¸°ëŠ¥
        function searchDiaries(query) {
            searchResultsDiv.innerHTML = ''; // ê¸°ì¡´ ê²€ìƒ‰ ê²°ê³¼ ì´ˆê¸°í™”
            if (!query) {
                searchResultsDiv.textContent = 'ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.';
                return;
            }

            let foundResults = false;
            for (let i = 0; i < localStorage.length; i++) {
                const key = localStorage.key(i);
                if (key.startsWith('diary_')) {
                    const date = key.replace('diary_', '');
                    const entry = loadDiaryLocally(date);
                    if (entry && entry.content.toLowerCase().includes(query)) {
                        const resultDiv = document.createElement('div');
                        resultDiv.innerHTML = `<strong>${date}</strong>: ${entry.content.substring(0, Math.min(entry.content.length, 100))}...`; // 100ìê¹Œì§€ í‘œì‹œ
                        resultDiv.addEventListener('click', () => {
                            diaryDateInput.value = date;
                            loadDiary(date);
                            searchResultsDiv.innerHTML = ''; // ê²€ìƒ‰ ê²°ê³¼ ë‹«ê¸°
                            searchQueryInput.value = '';
                        });
                        searchResultsDiv.appendChild(resultDiv);
                        foundResults = true;
                    }
                }
            }

            if (!foundResults) {
                searchResultsDiv.textContent = 'ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.';
            }
        }

        /* --- ì„œë²„ ì €ì¥ (ê°œë…ì ) ë¡œì§ ìŠ¤ì¼ˆë ˆí†¤ --- */
        // ì‹¤ì œ ì„œë²„ êµ¬í˜„ì€ ì œì™¸í•˜ê³ , fetch APIë¥¼ ì‚¬ìš©í•œ ë¹„ë™ê¸° í†µì‹  ì˜ˆì‹œë§Œ ì£¼ì„ìœ¼ë¡œ ëª…ì‹œí•©ë‹ˆë‹¤.

        /**
         * @param {string} date - ì¼ê¸° ë‚ ì§œ (YYYY-MM-DD)
         * @param {object} entry - ì¼ê¸° ë‚´ìš© ê°ì²´
         */
        async function saveDiaryToServer(date, entry) {
            console.log('ì„œë²„ì— ì¼ê¸° ì €ì¥ ì‹œë„:', date, entry);
            try {
                // ì‹¤ì œ ì„œë²„ ì—”ë“œí¬ì¸íŠ¸ì™€ ë°ì´í„° í˜•ì‹ì— ë§ê²Œ ìˆ˜ì •í•´ì•¼ í•©ë‹ˆë‹¤.
                const response = await fetch('/api/diary/save', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ date: date, data: entry }),
                });
                if (response.ok) {
                    console.log('ì„œë²„ì— ì¼ê¸° ì €ì¥ ì„±ê³µ!');
                    // alertMessage('ì„œë²„ì— ì¼ê¸° ì €ì¥ ì„±ê³µ!', 'success');
                } else {
                    console.error('ì„œë²„ì— ì¼ê¸° ì €ì¥ ì‹¤íŒ¨:', response.statusText);
                    // alertMessage('ì„œë²„ì— ì¼ê¸° ì €ì¥ ì‹¤íŒ¨!', 'error');
                }
            } catch (error) {
                console.error('ì„œë²„ í†µì‹  ì˜¤ë¥˜:', error);
                // alertMessage('ì„œë²„ í†µì‹  ì˜¤ë¥˜ ë°œìƒ!', 'error');
            }
        }

        /**
         * @param {string} date - ì¼ê¸° ë‚ ì§œ (YYYY-MM-DD)
         * @returns {Promise<object|null>} - ì¼ê¸° ë‚´ìš© ê°ì²´ ë˜ëŠ” null
         */
        async function loadDiaryFromServer(date) {
            console.log('ì„œë²„ì—ì„œ ì¼ê¸° ë¶ˆëŸ¬ì˜¤ê¸° ì‹œë„:', date);
            try {
                const response = await fetch(`/api/diary/load?date=${date}`);
                if (response.ok) {
                    const data = await response.json();
                    console.log('ì„œë²„ì—ì„œ ì¼ê¸° ë¶ˆëŸ¬ì˜¤ê¸° ì„±ê³µ:', data);
                    return data; // ë¶ˆëŸ¬ì˜¨ ì¼ê¸° ë°ì´í„° ë°˜í™˜
                } else {
                    console.error('ì„œë²„ì—ì„œ ì¼ê¸° ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨:', response.statusText);
                    return null;
                }
            } catch (error) {
                console.error('ì„œë²„ í†µì‹  ì˜¤ë¥˜:', error);
                return null;
            }
        }

        /**
         * @param {string} date - ì¼ê¸° ë‚ ì§œ (YYYY-MM-DD)
         */
        async function deleteDiaryFromServer(date) {
            console.log('ì„œë²„ì—ì„œ ì¼ê¸° ì‚­ì œ ì‹œë„:', date);
            try {
                const response = await fetch(`/api/diary/delete?date=${date}`, {
                    method: 'DELETE',
                });
                if (response.ok) {
                    console.log('ì„œë²„ì—ì„œ ì¼ê¸° ì‚­ì œ ì„±ê³µ!');
                    // alertMessage('ì„œë²„ì—ì„œ ì¼ê¸° ì‚­ì œ ì„±ê³µ!', 'success');
                } else {
                    console.error('ì„œë²„ì—ì„œ ì¼ê¸° ì‚­ì œ ì‹¤íŒ¨:', response.statusText);
                    // alertMessage('ì„œë²„ì—ì„œ ì¼ê¸° ì‚­ì œ ì‹¤íŒ¨!', 'error');
                }
            } catch (error) {
                console.error('ì„œë²„ í†µì‹  ì˜¤ë¥˜:', error);
                // alertMessage('ì„œë²„ í†µì‹  ì˜¤ë¥˜ ë°œìƒ!', 'error');
            }
        }

        /* --- ì»¤ìŠ¤í…€ ê²½ê³ /í™•ì¸ ë©”ì‹œì§€ (alert/confirm ëŒ€ì²´) --- */
        // alert()ì™€ confirm() ëŒ€ì‹  ì‚¬ìš©í•  ì»¤ìŠ¤í…€ ë©”ì‹œì§€ ë°•ìŠ¤
        function alertMessage(message, type = 'info') {
            const existingAlert = document.getElementById('customAlert');
            if (existingAlert) existingAlert.remove();

            const alertBox = document.createElement('div');
            alertBox.id = 'customAlert';
            alertBox.style.cssText = `
                position: fixed;
                top: 20px;
                left: 50%;
                transform: translateX(-50%);
                padding: 15px 25px;
                border-radius: 10px;
                font-weight: bold;
                z-index: 1000;
                box-shadow: 0 5px 15px rgba(0,0,0,0.2);
                color: white;
                opacity: 0;
                transition: opacity 0.5s ease-in-out, transform 0.5s ease-in-out;
            `;

            if (type === 'success') {
                alertBox.style.backgroundColor = '#a8d5ba'; /* ë¯¼íŠ¸ìƒ‰ */
            } else if (type === 'error') {
                alertBox.style.backgroundColor = '#ff7f7f'; /* ë¹¨ê°•ìƒ‰ */
            } else if (type === 'warning') {
                alertBox.style.backgroundColor = '#ffbe76'; /* ì£¼í™©ìƒ‰ */
            } else {
                alertBox.style.backgroundColor = '#76baff'; /* íŒŒë‘ìƒ‰ (info) */
            }

            alertBox.textContent = message;
            document.body.appendChild(alertBox);

            setTimeout(() => {
                alertBox.style.opacity = '1';
                alertBox.style.transform = 'translateX(-50%) translateY(0)';
            }, 50);

            setTimeout(() => {
                alertBox.style.opacity = '0';
                alertBox.style.transform = 'translateX(-50%) translateY(-20px)';
                alertBox.addEventListener('transitionend', () => alertBox.remove());
            }, 3000);
        }

        function confirmMessage(message) {
            // Canvas í™˜ê²½ì—ì„œ confirm()ì´ ì‘ë™í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ, ì»¤ìŠ¤í…€ ëª¨ë‹¬ë¡œ ëŒ€ì²´í•©ë‹ˆë‹¤.
            return new Promise((resolve) => {
                const modal = document.createElement('div');
                modal.style.cssText = `
                    position: fixed;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    background: rgba(0,0,0,0.5);
                    display: flex;
                    justify-content: center;
                    align-items: center;
                    z-index: 1001;
                `;
                modal.innerHTML = `
                    <div style="background: white; padding: 30px; border-radius: 15px; text-align: center; box-shadow: 0 5px 20px rgba(0,0,0,0.3); color: #5a4a42;">
                        <p style="margin-bottom: 20px; font-size: 1.1em; font-weight: 600;">${message}</p>
                        <button id="confirmYes" style="margin-right: 10px; padding: 10px 20px; background-color: #a8d5ba; color: white; border: none; border-radius: 10px; cursor: pointer; font-weight: 600;">ì˜ˆ</button>
                        <button id="confirmNo" style="padding: 10px 20px; background-color: #ff7f7f; color: white; border: none; border-radius: 10px; cursor: pointer; font-weight: 600;">ì•„ë‹ˆì˜¤</button>
                    </div>
                `;
                document.body.appendChild(modal);
                document.getElementById('confirmYes').onclick = () => { modal.remove(); resolve(true); };
                document.getElementById('confirmNo').onclick = () => { modal.remove(); resolve(false); };
            });
        }

    </script>
</body>
</html>
